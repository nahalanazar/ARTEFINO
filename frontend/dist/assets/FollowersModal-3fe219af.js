import{j as e,al as u,ap as x,E as r,d as w,be as k,r as d,bj as E,as as A,at as S,au as B,bi as N,av as O,aw as T,bk as z,bl as D,bm as H,Q as m}from"./index-51727cb1.js";import{F as P}from"./FollowButton-65c4299f.js";function V({onConfirm:a,onCancel:t,followerName:i}){return e.jsxs(u,{position:"fixed",top:"50%",left:"50%",transform:"translate(-50%, -50%)",backgroundColor:"white",padding:"16px",borderRadius:"8px",boxShadow:"0 0 10px rgba(0, 0, 0, 0.2)",zIndex:"2000",children:[e.jsxs(x,{children:["Are you sure you want to remove ",i,"?"]}),e.jsx(r,{onClick:a,children:"Yes, remove"}),e.jsx(r,{onClick:t,children:"Cancel"})]})}function Q({userDetails:a,isOwnProfile:t,onUpdateFollowersCount:i,fetchUserDetails:C}){var f;const{userInfo:v}=w(s=>s.userAuth),{isOpen:R,onOpen:b,onClose:h}=k(),j=d.useRef(null),y="https://res.cloudinary.com/dtzcblii7/image/upload/v1705027171/defaultImage_pmarom.jpg",[p,l]=d.useState(!1),[n,c]=d.useState(null),[I]=E(),F=async s=>{c(s),l(!0)},M=async()=>{var s;try{const o=String(n._id),g=await I(o);g.data.status==="success"?(m.warning(`Removed ${n.name}`),i(n._id)):(console.error("Error Removing artist:",g),m.error("Failed to Remove artist"))}catch(o){console.error("Error Removing user:",o),m.error(((s=o==null?void 0:o.data)==null?void 0:s.message)||(o==null?void 0:o.error))}finally{l(!1),c(null)}},_=()=>{l(!1),c(null)};return e.jsxs(e.Fragment,{children:[e.jsx("div",{ref:j,onClick:()=>b(),style:{cursor:"pointer"},children:"Followers"}),e.jsxs(A,{onClose:h,finalFocusRef:j,isOpen:R,scrollBehavior:"inside",children:[e.jsx(S,{}),e.jsxs(B,{children:[e.jsx(N,{children:"Followers"}),e.jsx(O,{}),e.jsx(T,{children:e.jsx(z,{align:"start",spacing:4,children:((f=a.followers)==null?void 0:f.length)>0?a.followers.map(s=>e.jsxs(u,{display:"flex",alignItems:"center",justifyContent:"space-between",w:"100%",children:[e.jsxs(u,{display:"flex",alignItems:"center",children:[e.jsx(D,{name:s.name,src:s.profileImageName?s.profileImageName:y}),e.jsx(x,{ml:4,children:s.name})]}),t?e.jsx(r,{colorScheme:"red",onClick:()=>F(s),children:"Remove"}):s._id!==v.id&&e.jsx(P,{artistId:s._id,fetchUserDetails:C})]},s._id)):e.jsx(x,{children:"No Followers"})})}),e.jsx(H,{children:!p&&e.jsx(r,{onClick:h,children:"Close"})})]})]}),p&&e.jsx(V,{onConfirm:M,onCancel:_,followerName:n==null?void 0:n.name})]})}export{Q as default};

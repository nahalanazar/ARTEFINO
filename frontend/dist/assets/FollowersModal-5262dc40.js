import{j as e,al as u,ap as x,E as t,d as _,be as k,r as d,bj as E,as as A,at as S,au as B,bi as N,av as O,aw as P,bk as T,bl as D,bm as H,Q as m}from"./index-54d6a279.js";import{F as V}from"./FollowButton-206508af.js";function z({onConfirm:a,onCancel:r,followerName:l}){return e.jsxs(u,{position:"fixed",top:"50%",left:"50%",transform:"translate(-50%, -50%)",backgroundColor:"white",padding:"16px",borderRadius:"8px",boxShadow:"0 0 10px rgba(0, 0, 0, 0.2)",zIndex:"2000",children:[e.jsxs(x,{children:["Are you sure you want to remove ",l,"?"]}),e.jsx(t,{onClick:a,children:"Yes, remove"}),e.jsx(t,{onClick:r,children:"Cancel"})]})}function Q({userDetails:a,isOwnProfile:r,onUpdateFollowersCount:l,fetchUserDetails:C}){var p;const{userInfo:v}=_(s=>s.userAuth),{isOpen:I,onOpen:R,onClose:h}=k(),j=d.useRef(null),b="http://localhost:5000/UserProfileImages/",[f,i]=d.useState(!1),[n,c]=d.useState(null),[y]=E(),F=async s=>{c(s),i(!0)},M=async()=>{var s;try{const o=String(n._id),g=await y(o);g.data.status==="success"?(m.warning(`Removed ${n.name}`),l(n._id)):(console.error("Error Removing artist:",g),m.error("Failed to Remove artist"))}catch(o){console.error("Error Removing user:",o),m.error(((s=o==null?void 0:o.data)==null?void 0:s.message)||(o==null?void 0:o.error))}finally{i(!1),c(null)}},w=()=>{i(!1),c(null)};return e.jsxs(e.Fragment,{children:[e.jsx("div",{ref:j,onClick:()=>R(),style:{cursor:"pointer"},children:"Followers"}),e.jsxs(A,{onClose:h,finalFocusRef:j,isOpen:I,scrollBehavior:"inside",children:[e.jsx(S,{}),e.jsxs(B,{children:[e.jsx(N,{children:"Followers"}),e.jsx(O,{}),e.jsx(P,{children:e.jsx(T,{align:"start",spacing:4,children:((p=a.followers)==null?void 0:p.length)>0?a.followers.map(s=>e.jsxs(u,{display:"flex",alignItems:"center",justifyContent:"space-between",w:"100%",children:[e.jsxs(u,{display:"flex",alignItems:"center",children:[e.jsx(D,{name:s.name,src:s.profileImageName?s.profileImageName:b+"defaultImage.jpeg"}),e.jsx(x,{ml:4,children:s.name})]}),r?e.jsx(t,{colorScheme:"red",onClick:()=>F(s),children:"Remove"}):s._id!==v.id&&e.jsx(V,{artistId:s._id,fetchUserDetails:C})]},s._id)):e.jsx(x,{children:"No Followers"})})}),e.jsx(H,{children:!f&&e.jsx(t,{onClick:h,children:"Close"})})]})]}),f&&e.jsx(z,{onConfirm:M,onCancel:w,followerName:n==null?void 0:n.name})]})}export{Q as default};

import{j as e,l as x,r as i,aX as M,aD as C,Q as j,aY as g,A as w,e as S}from"./index-908e2f29.js";import{M as c}from"./Modal-9cd31f65.js";import{T as b}from"./Table-25c9218c.js";const A=({show:r,handleClose:o,handleConfirm:n})=>e.jsxs(c,{show:r,onHide:o,children:[e.jsx(c.Header,{closeButton:!0,children:e.jsx(c.Title,{children:"Confirmation"})}),e.jsx(c.Body,{children:"Are you sure you want to remove this post?"}),e.jsxs(c.Footer,{children:[e.jsx(x,{variant:"secondary",onClick:o,children:"Cancel"}),e.jsx(x,{variant:"danger",onClick:n,children:"Remove"})]})]}),B=({reportedPosts:r,setReportedPosts:o})=>{const[n,a]=i.useState(!1),[u,d]=i.useState(null),[m]=M(),p=t=>{d(t),a(!0)},l=t=>t.isReviewed,R=t=>l(t)?"secondary":"danger",f=t=>l(t)?"Post Removed":"Remove Post",v=async()=>{var t;try{const s=u.reportId;await m({reportId:s}),j.success("Post removed Successfully."),d(null);const y=r.map(h=>h.reportId===s?{...h,isReviewed:!0}:h);o(y)}catch(s){j.error(((t=s==null?void 0:s.data)==null?void 0:t.message)||(s==null?void 0:s.error))}a(!1)},P=()=>{a(!1)};return e.jsxs(e.Fragment,{children:[e.jsxs(b,{striped:!0,bordered:!0,hover:!0,responsive:!0,children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{children:"SI No."}),e.jsx("th",{children:"Title"}),e.jsx("th",{children:"Uploaded Artist"}),e.jsx("th",{children:"Reported Artist"}),e.jsx("th",{children:"Reported Date"}),e.jsx("th",{children:"Reason"}),e.jsx("th",{children:"Manage"})]})}),e.jsx("tbody",{children:r&&r.map((t,s)=>e.jsxs("tr",{children:[e.jsx("td",{children:s+1}),e.jsx("td",{children:t.title}),e.jsx("td",{children:t.postedUserName}),e.jsx("td",{children:t.reportedUserName}),e.jsx("td",{children:C(t.reportedDate).format("MMMM DD, YYYY hh:mm A")}),e.jsx("td",{children:t.reportedReason}),e.jsx("td",{children:e.jsx(x,{type:"button",variant:R(t),onClick:()=>p(t),disabled:l(t),children:f(t)})})]},s))})]}),e.jsx(A,{show:n,handleClose:P,handleConfirm:v})]})},k=()=>{const[r,o]=i.useState([]),[n,{isLoading:a}]=g();return i.useEffect(()=>{(async()=>{try{const d=await n();o(d.data)}catch(d){console.error("Error fetching reported posts:",d)}})()},[n]),e.jsxs(w,{children:[e.jsx("h1",{className:"p-2",children:"Reported Posts"}),a?e.jsx(S,{}):e.jsx(B,{reportedPosts:r,setReportedPosts:o})]})};export{k as default};

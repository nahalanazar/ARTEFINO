import{d as A,r as n,a as G,k as U,j as e,B as a,e as D,l as R,Q as m,s as B}from"./index-6686ab90.js";import{F as T}from"./FormContainer-34eecb5f.js";import"./Row-56c8e548.js";const O=()=>{const w="https://nahalasm.shop/UserProfileImages/",{userInfo:r}=A(s=>s.userAuth),[i,p]=n.useState(""),[c,u]=n.useState(""),[l,y]=n.useState(""),[h,C]=n.useState(""),[x,v]=n.useState(""),[d,b]=n.useState(r.isPrivate),E=G(),[N,{isLoading:L}]=U();n.useEffect(()=>{p(r.name),u(r.email)},[r.name,r.email]);const F=s=>{const o=s.target.files[0];S(o)},S=s=>{const o=new FileReader;o.readAsDataURL(s),o.onloadend=()=>{v(o.result)}},k=async s=>{var o,f,g,j,P;if(s.preventDefault(),l!==h)m.error("Passwords do not match");else try{const t=new FormData;t.append("name",i),t.append("email",c),t.append("password",l),t.append("profileImage",x),t.append("isPrivate",d);const I=await N({name:i,email:c,password:l,profileImage:x,isPrivate:d}).unwrap();I&&(E(B({...I})),m.success("Profile updated"))}catch(t){console.log("blocked",(f=(o=t==null?void 0:t.data)==null?void 0:o.error)==null?void 0:f.message),m.error(((g=t==null?void 0:t.data)==null?void 0:g.message)||t.error||((P=(j=t==null?void 0:t.data)==null?void 0:j.error)==null?void 0:P.message))}};return e.jsxs(T,{children:[e.jsx("h1",{children:"Update Profile"}),e.jsx("img",{src:r.profileImageName?r.profileImageName:w+"defaultImage.jpeg",alt:r.name,style:{width:"150px",height:"150px",borderRadius:"50%",objectFit:"cover",display:"block",marginTop:"5px",marginLeft:"115px",marginBottom:"10px"}}),e.jsxs(a,{onSubmit:k,children:[e.jsxs(a.Group,{className:"my-2",controlId:"name",children:[e.jsx(a.Label,{children:"Name"}),e.jsx(a.Control,{type:"text",placeholder:"Enter Name",value:i,onChange:s=>p(s.target.value)})]}),e.jsxs(a.Group,{className:"my-2",controlId:"email",children:[e.jsx(a.Label,{children:"Email Address"}),e.jsx(a.Control,{type:"email",placeholder:"Enter Email",value:c,onChange:s=>u(s.target.value)})]}),e.jsxs(a.Group,{className:"my-2",controlId:"password",children:[e.jsx(a.Label,{children:"Password"}),e.jsx(a.Control,{type:"password",placeholder:"Enter Password",value:l,onChange:s=>y(s.target.value)})]}),e.jsxs(a.Group,{className:"my-2",controlId:"confirmPassword",children:[e.jsx(a.Label,{children:"Confirm Password"}),e.jsx(a.Control,{type:"password",placeholder:"Confirm Password",value:h,onChange:s=>C(s.target.value)})]}),e.jsxs(a.Group,{className:"my-2",controlId:"profileImage",children:[e.jsx(a.Label,{children:"Profile Picture"}),e.jsx(a.Control,{type:"file",onChange:F})]}),e.jsx(a.Group,{controlId:"isPrivate",className:"my-2",children:e.jsx(a.Check,{type:"checkbox",label:"Make Account Private",checked:d,onChange:s=>b(s.target.checked)})}),L&&e.jsx(D,{}),e.jsx(R,{type:"submit",variant:"primary",className:"mt-3",children:"Update"})]})]})};export{O as default};

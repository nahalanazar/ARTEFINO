import{d as b,r as i,bn as x,bo as R,bp as y,j as C,Q as t}from"./index-51727cb1.js";const A=({artistId:l,fetchUserDetails:w})=>{const{userInfo:d}=b(e=>e.userAuth),[f,r]=i.useState(!1),[a,n]=i.useState(!1),[F]=x(),[g]=R(),[p]=y();i.useEffect(()=>{d&&(async()=>{var o;try{const s=await F(),c=s.data.followers.map(u=>u._id);r(c==null?void 0:c.includes(l)),n(s.data.followRequestsSend.some(u=>u._id===l))}catch(s){t.error(((o=s==null?void 0:s.data)==null?void 0:o.message)||(s==null?void 0:s.error)),console.error("Error fetching followed users:",s)}})()},[l,d,F]);const h=async()=>{var e;try{const o=await g(l);o.data.status==="success"?(t.success("Started Following New Artist"),r(!0),n(!1),w()):o.data.status==="requested"?(t.info("Follow Request sent"),r(!1),n(!0)):(console.error("Error following user:",o),t.error("Failed to follow artist"))}catch(o){console.error("Error following user:",o),t.error(((e=o==null?void 0:o.data)==null?void 0:e.message)||(o==null?void 0:o.error))}},m=async()=>{var e;try{const o=await p(l);o.data.status==="success"?(t.success("UnFollowed Artist"),r(!1),n(!1),w()):(console.error("Error unFollowing user:",o),t.error("Failed to unFollow artist"))}catch(o){console.error("Error unFollowing user:",o),t.error(((e=o==null?void 0:o.data)==null?void 0:e.message)||(o==null?void 0:o.error))}};return C.jsx("button",{className:"followButton",style:{color:"white",backgroundColor:a?"#CCCCCC":"#007BFF",fontSize:16,fontFamily:"Roboto",fontWeight:"700",padding:"8px 16px",marginRight:"10px",border:"none",borderRadius:"4px",cursor:"pointer"},onClick:f?m:h,disabled:a,children:a?"Requested":f?"UnFollow":"Follow"})};export{A as F};

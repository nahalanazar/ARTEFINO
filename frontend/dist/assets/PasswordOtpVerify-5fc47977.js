import{r,m as v,n as T,u as R,j as e,B as i,e as C,l as f,Q as o}from"./index-908e2f29.js";import{F as E}from"./FormContainer-5dba1fb9.js";import"./Row-cc9ed775.js";const N=()=>{const[c,l]=r.useState(""),[x,d]=r.useState(!1),[n,u]=r.useState(60),[h,{isLoading:O}]=v(),[j,{isLoading:g}]=T(),w=R();r.useEffect(()=>{let s;return n>0&&(s=setInterval(()=>{u(a=>a-1)},1e3)),()=>clearInterval(s)},[n]),r.useEffect(()=>{n===0&&d(!0)},[n]);const y=async s=>{var a,p,m;s.preventDefault();try{const t=await h({otp:c}).unwrap();w("/resetPassword")}catch(t){l(""),(a=t==null?void 0:t.data)!=null&&a.message?o.error((p=t==null?void 0:t.data)==null?void 0:p.message):o.error(((m=t==null?void 0:t.data)==null?void 0:m.message)||t.error)}},P=async()=>{var s;try{o.info("Resending OTP..."),await j().unwrap(),o.success("New OTP sent successfully!"),d(!1),u(60)}catch(a){o.error(((s=a==null?void 0:a.data)==null?void 0:s.message)||a.error)}};return e.jsxs(E,{children:[e.jsx("h1",{children:"OTP verification"}),n>0?e.jsxs("p",{children:["OTP will expire in ",n," seconds"]}):e.jsxs("p",{children:["Time to enter OTP has expired. Click ",e.jsx("b",{children:"Resend OTP"})," to get a new one."]}),e.jsxs(i,{onSubmit:y,children:[e.jsxs(i.Group,{className:"my-2",controlId:"otp",children:[e.jsx(i.Label,{children:"Enter OTP"}),e.jsx(i.Control,{type:"text",placeholder:"Enter OTP",value:c,onChange:s=>l(s.target.value)})]}),O||g?e.jsx(C,{}):e.jsx(f,{type:"submit",variant:"primary",className:"mt-3",children:"Verify OTP"}),x&&e.jsx(f,{variant:"link",className:"mt-3",onClick:P,children:"Resend OTP"})]})]})};export{N as default};

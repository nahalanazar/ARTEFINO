import{d as A,r as l,a as G,k as D,j as e,B as a,e as R,l as U,Q as m,s as B}from"./index-d3228293.js";import{F as _}from"./FormContainer-488aae9e.js";import"./Row-96a84e49.js";const z=()=>{const w="https://res.cloudinary.com/dtzcblii7/image/upload/v1705027171/defaultImage_pmarom.jpg",{userInfo:o}=A(s=>s.userAuth),[i,p]=l.useState(""),[c,u]=l.useState(""),[n,y]=l.useState(""),[h,v]=l.useState(""),[x,C]=l.useState(""),[d,b]=l.useState(o.isPrivate),E=G(),[N,{isLoading:L}]=D();l.useEffect(()=>{p(o.name),u(o.email)},[o.name,o.email]);const F=s=>{const r=s.target.files[0];S(r)},S=s=>{const r=new FileReader;r.readAsDataURL(s),r.onloadend=()=>{C(r.result)}},k=async s=>{var r,g,f,j,P;if(s.preventDefault(),n!==h)m.error("Passwords do not match");else try{const t=new FormData;t.append("name",i),t.append("email",c),t.append("password",n),t.append("profileImage",x),t.append("isPrivate",d);const I=await N({name:i,email:c,password:n,profileImage:x,isPrivate:d}).unwrap();I&&(E(B({...I})),m.success("Profile updated"))}catch(t){console.log("blocked",(g=(r=t==null?void 0:t.data)==null?void 0:r.error)==null?void 0:g.message),m.error(((f=t==null?void 0:t.data)==null?void 0:f.message)||t.error||((P=(j=t==null?void 0:t.data)==null?void 0:j.error)==null?void 0:P.message))}};return e.jsxs(_,{children:[e.jsx("h1",{children:"Update Profile"}),e.jsx("img",{src:o.profileImageName?o.profileImageName:w,alt:o.name,style:{width:"150px",height:"150px",borderRadius:"50%",objectFit:"cover",display:"block",marginTop:"5px",marginLeft:"115px",marginBottom:"10px"}}),e.jsxs(a,{onSubmit:k,children:[e.jsxs(a.Group,{className:"my-2",controlId:"name",children:[e.jsx(a.Label,{children:"Name"}),e.jsx(a.Control,{type:"text",placeholder:"Enter Name",value:i,onChange:s=>p(s.target.value)})]}),e.jsxs(a.Group,{className:"my-2",controlId:"email",children:[e.jsx(a.Label,{children:"Email Address"}),e.jsx(a.Control,{type:"email",placeholder:"Enter Email",value:c,onChange:s=>u(s.target.value)})]}),e.jsxs(a.Group,{className:"my-2",controlId:"password",children:[e.jsx(a.Label,{children:"Password"}),e.jsx(a.Control,{type:"password",placeholder:"Enter Password",value:n,onChange:s=>y(s.target.value)})]}),e.jsxs(a.Group,{className:"my-2",controlId:"confirmPassword",children:[e.jsx(a.Label,{children:"Confirm Password"}),e.jsx(a.Control,{type:"password",placeholder:"Confirm Password",value:h,onChange:s=>v(s.target.value)})]}),e.jsxs(a.Group,{className:"my-2",controlId:"profileImage",children:[e.jsx(a.Label,{children:"Profile Picture"}),e.jsx(a.Control,{type:"file",onChange:F})]}),e.jsx(a.Group,{controlId:"isPrivate",className:"my-2",children:e.jsx(a.Check,{type:"checkbox",label:"Make Account Private",checked:d,onChange:s=>b(s.target.checked)})}),L&&e.jsx(R,{}),e.jsx(U,{type:"submit",variant:"primary",className:"mt-3",children:"Update"})]})]})};export{z as default};
